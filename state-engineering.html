<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Engineering Services Guide</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700;800&family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- MAIN APP THEME (Green/Neon - Same as J.html) --- */
        :root {
            --primary: #39ff14;
            --primary-dim: rgba(57, 255, 20, 0.4); 
            --bg-dark: #020202;
            --gold: #FFD700; 
            --gold-dim: rgba(255, 215, 0, 0.3);
            --header-offset: calc(15px + env(safe-area-inset-top));
            --header-height: 70px; 
            --footer-offset: calc(30px + env(safe-area-inset-bottom));
            --footer-height: 75px; 
            --text-light: #ffffff; 
            --card-bg: #1A1C20;
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            margin: 0;
            overflow: hidden; 
            height: 100vh;
            width: 100vw;
        }

        /* --- BACKGROUND --- */
        #fixed-media-background {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            z-index: -10; background-size: cover; background-position: center;
            opacity: 0.5; 
            /* Using an Engineering/Construction/Dam appropriate placeholder or abstract */
            background-image: url('https://images.unsplash.com/photo-1503387762-592deb58ef4e?q=80&w=1374&auto=format&fit=crop'); 
            filter: brightness(25%) hue-rotate(85deg) contrast(130%) saturate(160%);
        }

        /* --- HEADER --- */
        .iphone-header {
            position: fixed; top: var(--header-offset); left: 50%; transform: translateX(-50%);
            width: 92%; max-width: 600px; height: var(--header-height);
            background: rgba(5, 4, 1, 0.96); backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 215, 0, 0.25); border-radius: 24px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; z-index: 3000; box-shadow: 0 5px 25px rgba(0,0,0,0.5);
        }
        .header-left img, .header-right img { 
            width: 38px; height: 38px; border-radius: 10px; 
            border: 2px solid var(--primary); box-shadow: 0 4px 6px rgba(0,0,0,0.5); 
            object-fit: cover;
        }
        .header-center { font-family: 'Rajdhani', sans-serif; font-size: 1.5rem; font-weight: 800; color: #fff; letter-spacing: 2px; }
        .header-center span { color: var(--gold); }

        /* --- DOCK NAVIGATION --- */
        .iphone-dock-wrapper { 
            position: fixed; bottom: var(--footer-offset); 
            left: 0; width: 100%; display: flex; justify-content: center; z-index: 3000; padding: 0 15px; 
        }
        .iphone-dock { 
            width: 100%; max-width: 500px; height: var(--footer-height); 
            background: rgba(5, 4, 1, 0.95); backdrop-filter: blur(40px); 
            border-radius: 35px; border: 1px solid rgba(255, 215, 0, 0.15); 
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.9); padding: 0 12px; 
        }
        
        .nav-item { 
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; 
            color: #666; cursor: pointer; height: 100%; transition: all 0.3s ease;
            position: relative;
        }
        .nav-item .icon-box {
            width: 42px; height: 42px; display: flex; align-items: center; justify-content: center;
            border-radius: 14px; transition: all 0.3s; margin-bottom: 3px;
        }
        .nav-item i { font-size: 1.25rem; transition: 0.3s; }
        .nav-item span { font-size: 0.55rem; font-weight: 700; text-transform: uppercase; opacity: 0.7; }

        /* Locked State Visuals */
        .nav-item.locked { opacity: 0.3; pointer-events: none; filter: grayscale(100%); }
        
        /* Active State */
        .nav-item.active { color: var(--gold); opacity: 1; pointer-events: auto; filter: none; }
        .nav-item.active .icon-box {
            background: rgba(255, 215, 0, 0.15); border: 1px solid var(--gold); 
            transform: translateY(-5px); 
        }
        
        /* UPSC/ENGINEERING Tab Specific Active State */
        .nav-item.upsc-tab.active { color: var(--gold); }
        .nav-item.upsc-tab.active .icon-box {
            background: rgba(255, 215, 0, 0.15); border: 1px solid var(--gold);
            box-shadow: 0 0 15px var(--gold-dim);
        }

        /* --- MAIN CONTENT MODALS --- */
        .modal-overlay { 
            position: fixed; 
            top: calc(var(--header-offset) + var(--header-height) + 12px);
            bottom: calc(var(--footer-offset) + var(--footer-height) + 12px);
            left: 0; right: 0; z-index: 2500; 
            display: none; justify-content: center; padding: 0 12px; pointer-events: none;
        }
        .modal-overlay.active { display: flex !important; }
        .modal-box { 
            pointer-events: auto; background: rgba(10, 8, 2, 0.95); border: 1px solid rgba(255,215,0,0.3); 
            border-radius: 32px; width: 100%; max-width: 600px; height: 100%; 
            padding: 20px; box-shadow: 0 0 50px rgba(0,0,0,0.8); 
            display: flex; flex-direction: column; overflow: hidden; position: relative;
        }

        /* Scrollable Content Area */
        .scroll-content { flex-grow: 1; overflow-y: auto; padding-right: 5px; -webkit-overflow-scrolling: touch; }
        .scroll-content::-webkit-scrollbar { width: 4px; }
        .scroll-content::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }

        /* --- UPSC/CARD STYLES (Gold Theme) --- */
        .upsc-container { color: #f3f4f6; font-family: 'Inter', sans-serif; }
        .upsc-heading { 
            color: var(--gold); font-family: 'Rajdhani', sans-serif; font-weight: 700; 
            border-bottom: 2px solid var(--gold); padding-bottom: 5px; margin-bottom: 15px; display: inline-block;
            font-size: 1.5rem;
        }
        .upsc-card {
            background: var(--card-bg); border: 1px solid #A37A00; border-radius: 16px;
            padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }
        .upsc-card:hover { transform: translateY(-2px); }
        .upsc-btn {
            background: linear-gradient(135deg, #FFC107, #B8860B); color: #000; padding: 10px 20px; border-radius: 12px;
            font-weight: 700; font-size: 0.9rem; cursor: pointer; border: none;
            transition: all 0.2s; display: inline-block; margin-top: 10px; width: 100%;
            text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .upsc-btn:active { transform: scale(0.98); }
        
        /* Secondary Button Style */
        .upsc-btn-secondary {
            background: transparent; border: 1px solid var(--gold); color: var(--gold);
            margin-top: 8px;
        }
        .upsc-btn-secondary:hover { background: rgba(255, 215, 0, 0.1); }
        
        /* Flowchart */
        .flowchart-flex { display: flex; flex-direction: column; align-items: center; gap: 15px; margin: 20px 0; }
        @media(min-width: 600px) { .flowchart-flex { flex-direction: row; justify-content: center; } }
        .flowchart-step {
            width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--gold);
            display: flex; align-items: center; justify-content: center; text-align: center;
            font-weight: 700; color: var(--gold); background: #26292E; cursor: pointer;
            transition: all 0.3s; flex-shrink: 0;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
        }
        .flowchart-step:hover { background: var(--gold); color: #000; box-shadow: 0 0 20px var(--gold); transform: scale(1.05); }
        .arrow-down { font-size: 2rem; color: var(--gold); }
        @media(min-width: 600px) { .arrow-down { transform: rotate(-90deg); } }

        /* Timeline */
        .timeline-item { 
            border-left: 3px solid var(--gold); padding-left: 20px; margin-left: 10px; 
            padding-bottom: 20px; position: relative; 
        }
        .timeline-item::before {
            content: ''; position: absolute; left: -10px; top: 0; width: 17px; height: 17px;
            background: var(--gold); border-radius: 50%; border: 3px solid #1A1C20;
        }

        /* --- NESTED SUB-MODALS (For UPSC details) --- */
        .upsc-sub-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(10px); z-index: 4000;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: 0.3s; padding: 20px;
        }
        .upsc-sub-modal.active { opacity: 1; visibility: visible; }
        .sub-modal-content {
            background: #1A1C20; border: 1px solid var(--gold); width: 100%; max-width: 600px;
            max-height: 85vh; overflow-y: auto; border-radius: 20px; padding: 25px;
            position: relative; color: #fff; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }
        .close-sub-btn {
            position: absolute; top: 15px; right: 15px; font-size: 1.5rem; color: var(--gold);
            background: none; border: none; cursor: pointer; z-index: 10;
        }

        /* --- VACANT/PLACEHOLDER TABS --- */
        .vacant-msg {
            height: 100%; display: flex; align-items: center; justify-content: center;
            flex-direction: column; color: #555; text-align: center;
        }
        .vacant-msg i { font-size: 3rem; margin-bottom: 10px; color: #333; }
        
        /* --- IMPROVED PROFILE STYLES --- */
        .profile-setup-card {
            background: linear-gradient(180deg, rgba(30,30,30,0.9) 0%, rgba(10,10,10,0.95) 100%);
            border: 1px solid rgba(255, 215, 0, 0.2);
            padding: 20px;
            border-radius: 20px;
            margin-top: 10px;
        }
        .profile-form-container {
            display: flex; flex-direction: column; gap: 15px;
        }
        .form-group { position: relative; }
        .form-group label { 
            display: block; color: var(--gold); margin-bottom: 6px; font-size: 0.85rem; 
            font-weight: 600; text-transform: uppercase; letter-spacing: 1px;
        }
        .form-group input, .form-group select {
            width: 100%; padding: 14px 16px; background: rgba(0,0,0,0.4); 
            border: 1px solid #444; color: #fff;
            border-radius: 12px; outline: none; transition: 0.3s; font-size: 1rem;
        }
        .form-group input:focus, .form-group select:focus { 
            border-color: var(--gold); box-shadow: 0 0 10px rgba(255, 215, 0, 0.1); 
            background: rgba(0,0,0,0.6);
        }
        
        /* Profile View Design */
        .profile-header-card {
            background: linear-gradient(135deg, #1a1c20 0%, #000 100%);
            border: 1px solid var(--gold);
            border-radius: 24px;
            padding: 25px;
            position: relative;
            overflow: hidden;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .profile-header-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 80px;
            background: linear-gradient(90deg, #B8860B, #FFD700);
            opacity: 0.2;
        }
        .profile-avatar-large {
            width: 90px; height: 90px; border-radius: 50%;
            background: #000; border: 3px solid var(--gold);
            margin: 30px auto 15px; position: relative; z-index: 2;
            display: flex; align-items: center; justify-content: center;
            color: var(--gold); font-size: 2.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .profile-info-grid {
            display: grid; grid-cols-1 gap: 15px; margin-top: 25px;
        }
        .info-row {
            display: flex; align-items: center; background: rgba(255,255,255,0.03);
            padding: 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);
        }
        .info-icon {
            width: 40px; height: 40px; border-radius: 10px; background: rgba(255, 215, 0, 0.1);
            color: var(--gold); display: flex; align-items: center; justify-content: center;
            margin-right: 15px; font-size: 1.1rem;
        }
        .info-text label { display: block; font-size: 0.7rem; color: #888; text-transform: uppercase; }
        .info-text span { display: block; font-size: 0.95rem; color: #fff; font-weight: 600; }

        /* List Styling */
        .styled-list li { margin-bottom: 8px; display: flex; align-items: flex-start; }
        .styled-list li span.icon { margin-right: 10px; color: var(--gold); min-width: 20px; }
        
        .service-group { margin-bottom: 20px; }
        .service-group h4 { color: var(--gold); border-bottom: 1px solid rgba(255,215,0,0.3); padding-bottom: 5px; margin-bottom: 10px; font-weight: 700; font-size: 1.1rem; }
        
        .service-item { margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .service-item:last-child { border-bottom: none; }
        .service-item strong { color: var(--gold); display: block; margin-bottom: 4px; font-size: 0.95rem; }
        .service-item p { color: #ccc; font-size: 0.85rem; line-height: 1.4; }

        /* Loader */
        .loader {
            border: 3px solid #f3f3f3; border-top: 3px solid var(--gold);
            border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite;
            display: inline-block; vertical-align: middle; margin-left: 10px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    </style>
</head>
<body>
    
    <div id="fixed-media-background"></div>

    <header class="iphone-header">
        <div class="header-left"><img src="sti.png" alt="Logo"></div>
        <div class="header-center">ENGINEERING <span></span></div>
        <div class="header-right"><img src="ytglogo.png" alt="User"></div>
    </header>

    <div class="iphone-dock-wrapper">
        <nav class="iphone-dock">
            <div class="nav-item active" id="nav-profile" onclick="activateTab(this, 'profile')">
                <div class="icon-box"><i class="fas fa-user-circle"></i></div><span></span>
            </div>
            <div class="nav-item locked" id="nav-flats" onclick="activateTab(this, 'flats')">
                <div class="icon-box"><i class="fas fa-book"></i></div><span></span>
            </div>
            
            <div class="nav-item upsc-tab locked" id="nav-upsc" onclick="activateTab(this, 'upsc')">
                <div class="icon-box"><i class="fas fa-graduation-cap"></i></div><span>ENGINEERING</span>
            </div>
            
            <div class="nav-item locked" id="nav-pyq" onclick="activateTab(this, 'pyq')">
                <div class="icon-box"><i class="fas fa-file-alt"></i></div><span></span>
            </div>
            <div class="nav-item locked" id="nav-news" onclick="activateTab(this, 'news')">
                <div class="icon-box"><i class="fas fa-newspaper"></i></div><span></span>
            </div>
        </nav>
    </div>

    <div id="modal-profile" class="modal-overlay active">
        <div class="modal-box" style="border-color: var(--gold);">
            <div class="scroll-content upsc-container">
                
                <div id="profile-setup">
                    <div class="text-center mb-6">
                        <i class="fas fa-shield-alt text-4xl text-[var(--gold)] mb-3"></i>
                        <h2 class="text-2xl font-bold text-white">Aspirant Registration</h2>
                        <p class="text-gray-400 text-sm mt-1">Complete your profile to unlock the application.</p>
                    </div>

                    <div class="profile-setup-card">
                        <form id="registration-form" onsubmit="saveProfile(event)" class="profile-form-container">
                            <input type="hidden" name="sheetName" value="STATE-ENGINEERING"> 
                            
                            <div class="form-group">
                                <label><i class="fas fa-user mr-2"></i>Full Name</label>
                                <input type="text" name="name" id="user-name" placeholder="Ex: Amit Singh" required>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-3">
                                <div class="form-group">
                                    <label><i class="fas fa-phone mr-2"></i>Mobile</label>
                                    <input type="tel" name="phone" id="user-phone" placeholder="9876543210" required>
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-venus-mars mr-2"></i>Gender</label>
                                    <select name="gender" id="user-gender" required>
                                        <option value="">Select</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label><i class="fas fa-envelope mr-2"></i>Email Address</label>
                                <input type="email" name="email" id="user-email" placeholder="aspirant@gmail.com" required>
                            </div>

                            <div class="form-group">
                                <label><i class="fas fa-map-marker-alt mr-2"></i>Current Place (City/State)</label>
                                <input type="text" name="place" id="user-place" placeholder="Ex: Bhopal, MP" required>
                            </div>

                            <div class="form-group">
                                <label><i class="fas fa-calendar-alt mr-2"></i>Preparation Start Date</label>
                                <input type="date" name="startDate" id="user-date" required>
                            </div>

                            <button type="submit" id="submit-btn" class="upsc-btn mt-4">
                                <span>Complete Registration</span>
                                <div id="loading-spinner" class="loader" style="display:none;"></div>
                            </button>
                            <p class="text-xs text-center text-gray-500 mt-2"><i class="fas fa-lock mr-1"></i> Data is secure & required for access.</p>
                        </form>
                    </div>
                </div>

                <div id="profile-view" style="display:none;">
                    <h2 class="upsc-heading">My Profile üë§</h2>
                    
                    <div class="profile-header-card">
                        <div class="profile-header-bg"></div>
                        <div class="profile-avatar-large">
                            <i class="fas fa-user-graduate"></i>
                        </div>
                        <h3 id="display-name" class="text-2xl font-bold text-white mb-1 tracking-wide">User Name</h3>
                        <p class="text-[var(--gold)] text-sm font-bold uppercase tracking-widest mb-4">Engineering Aspirant</p>
                        
                        <div class="flex justify-center gap-4 text-center border-t border-gray-800 pt-4">
                             <div>
                                 <span class="block text-xl font-bold text-white" id="display-days">0</span>
                                 <span class="text-xs text-gray-500 uppercase">Days Prep</span>
                             </div>
                             <div class="w-px bg-gray-700"></div>
                             <div>
                                 <span class="block text-xl font-bold text-white" id="display-gender">-</span>
                                 <span class="text-xs text-gray-500 uppercase">Gender</span>
                             </div>
                        </div>
                    </div>

                    <div class="profile-info-grid">
                        <div class="info-row">
                            <div class="info-icon"><i class="fas fa-envelope"></i></div>
                            <div class="info-text">
                                <label>Email Address</label>
                                <span id="display-email">email@example.com</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-icon"><i class="fas fa-phone-alt"></i></div>
                            <div class="info-text">
                                <label>Mobile Number</label>
                                <span id="display-phone">+91 XXXXX XXXXX</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-icon"><i class="fas fa-map-marker-alt"></i></div>
                            <div class="info-text">
                                <label>Location</label>
                                <span id="display-place">Bhopal, MP</span>
                            </div>
                        </div>
                         <div class="info-row">
                            <div class="info-icon"><i class="fas fa-flag-checkered"></i></div>
                            <div class="info-text">
                                <label>Start Date</label>
                                <span id="display-date">01-01-2024</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="upsc-btn upsc-btn-secondary mt-8" onclick="resetProfile()">
                        <i class="fas fa-sign-out-alt mr-2"></i> Reset Profile & Logout
                    </button>
                </div>

            </div>
        </div>
    </div>

    <div id="modal-flats" class="modal-overlay">
        <div class="modal-box"><div class="vacant-msg"><i class="fas fa-building"></i><h2>Strategy & Resources</h2><p>Coming Soon</p></div></div>
    </div>
    <div id="modal-pyq" class="modal-overlay">
        <div class="modal-box"><div class="vacant-msg"><i class="fas fa-file-alt"></i><h2>Previous Year Questions</h2><p>Design & Functionality coming later.</p></div></div>
    </div>
    <div id="modal-news" class="modal-overlay">
        <div class="modal-box"><div class="vacant-msg"><i class="fas fa-newspaper"></i><h2>News & Updates</h2><p>Coming Soon</p></div></div>
    </div>

    <div id="modal-upsc" class="modal-overlay">
        <div class="modal-box" style="border-color: var(--gold);">
            <div class="scroll-content upsc-container">
                
                <section class="upsc-card">
                    <h2 class="upsc-heading">1. What are Engineering Services? ü§î</h2>
                    <p class="text-gray-300 text-sm mb-4 leading-relaxed">
                        This is an important government exam for the recruitment of engineers in various state government departments, such as the Public Works Department (PWD), Irrigation Department, and Urban Development. Its main job is to select the most suitable candidates for **Assistant Engineer (AE), Junior Engineer (JE)** and other **many important technical posts**, so they can contribute to the state's development.
                    </p>
                    <button class="upsc-btn" onclick="openSubModal('sub-services')">View All Posts (AE/JE)</button>
                    <button class="upsc-btn upsc-btn-secondary" onclick="activateTab(document.getElementById('nav-flats'), 'flats')">Start Preparation</button>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">2. Exam Process üéØ</h2>
                    <p class="text-gray-300 text-sm text-center mb-4">The engineering services recruitment process usually has three main stages. You can only move to the next stage after passing each one.</p>
                    <div class="flowchart-flex">
                        <div class="flowchart-step" onclick="openSubModal('sub-prelims')">
                            <div>Stage 1<br><span class="text-white text-xs opacity-80">Written</span></div>
                        </div>
                        <div class="arrow-down">‚ûú</div>
                        <div class="flowchart-step" onclick="openSubModal('sub-mains')">
                            <div>Stage 2<br><span class="text-white text-xs opacity-80">Mains</span></div>
                        </div>
                        <div class="arrow-down">‚ûú</div>
                        <div class="flowchart-step" onclick="openSubModal('sub-interview')">
                            <div>Stage 3<br><span class="text-white text-xs opacity-80">Interview</span></div>
                        </div>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">3. Who can apply? ‚úÖ</h2>
                    <ul class="styled-list text-sm text-gray-300 space-y-2">
                        <li><span class="icon">üéì</span><strong>Education:</strong> An engineering degree (B.E./B.Tech) for AE, and a diploma or degree for JE.</li>
                        <li><span class="icon">üéÇ</span><strong>Age:</strong> Minimum 21 years. Maximum 32-40 years (as per post and state).
                            <ul class="list-disc ml-8 text-gray-400 text-xs mt-1">
                                <li>SC/ST/OBC: 3-5 Years Relaxation</li>
                                <li>PwD: 10 Years Relaxation</li>
                                <li>Ex-Servicemen: As per rules</li>
                            </ul>
                        </li>
                        <li><span class="icon">üáÆüá≥</span><strong>Nationality:</strong> Must be a citizen of India and resident of the concerned state.</li>
                    </ul>
                    <div class="mt-4">
                         <h3 class="text-[var(--gold)] text-sm font-bold mb-2">Age Relaxation (Years)</h3>
                         <div class="h-48 w-full">
                            <canvas id="attemptsChart"></canvas>
                        </div>
                        <p class="text-xs text-gray-400 text-center mt-2">Attempts: Unlimited within age limit.</p>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">4. Syllabus Overview üìö</h2>
                    <p class="text-sm text-gray-300 mb-4">The syllabus typically includes General Knowledge, Technical Subjects (Civil/Mech/Elec), and State-Specific Knowledge.</p>
                    <div class="grid grid-cols-2 gap-3 text-xs text-center font-semibold text-gray-200 mb-4">
                        <div class="bg-gray-800 p-3 rounded-lg border border-gray-700">üìú General Knowledge</div>
                        <div class="bg-gray-800 p-3 rounded-lg border border-gray-700">üåç State GK</div>
                        <div class="bg-gray-800 p-3 rounded-lg border border-gray-700">‚úçÔ∏è Hindi/English</div>
                        <div class="bg-gray-800 p-3 rounded-lg border border-gray-700">‚öôÔ∏è Civil Engg</div>
                        <div class="bg-gray-800 p-3 rounded-lg border border-gray-700">üí° Mechanical Engg</div>
                        <div class="bg-gray-800 p-3 rounded-lg border border-gray-700">‚ö° Electrical Engg</div>
                    </div>
                    <button class="upsc-btn" onclick="openSubModal('sub-syllabus')">View Detailed Syllabus</button>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">5. Main Exam Pattern üìù</h2>
                    <p class="text-sm text-gray-300 mb-2">Written Exam followed by Interview. Merit based.</p>
                    <div class="space-y-3 mt-3">
                        <div class="p-3 bg-gray-900 rounded border border-gray-700">
                            <strong class="text-[var(--gold)] block mb-1">1. Preliminary Exam (AE)</strong>
                            <p class="text-xs text-gray-400">Objective Type. GK + Technical.</p>
                        </div>
                        <div class="p-3 bg-gray-900 rounded border border-gray-700">
                            <strong class="text-[var(--gold)] block mb-1">2. Main Exam (AE/JE)</strong>
                            <p class="text-xs text-gray-400">Descriptive Technical Papers.</p>
                        </div>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">6. Importance of Technical Subjects üåü</h2>
                    <p class="text-sm text-gray-300 mb-3">
                        Crucial. Deep understanding of your **Core Engineering Discipline** is vital for selection.
                    </p>
                    <div class="p-3 bg-[rgba(255,215,0,0.1)] border border-[var(--gold)] rounded-lg">
                        <strong class="text-[var(--gold)] text-xs block mb-1">üí° Why Important?</strong>
                        <p class="text-xs text-gray-300">Technical papers carry maximum weightage.</p>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">7. Key Competencies üß†</h2>
                    <p class="text-sm text-gray-300 mb-4">Selection requires technical expertise and aptitude.</p>
                    <div class="h-56 w-full">
                        <canvas id="competencyChart"></canvas>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">8. Strategy: Smart Work üìà</h2>
                    <div class="space-y-6 mt-4">
                        <div class="timeline-item">
                            <h4 class="text-[var(--gold)] font-bold text-sm">Step 1: Basics</h4>
                            <p class="text-xs text-gray-400 mt-1">Strengthen fundamental engineering principles.</p>
                        </div>
                        <div class="timeline-item">
                            <h4 class="text-[var(--gold)] font-bold text-sm">Step 2: Practice</h4>
                            <p class="text-xs text-gray-400 mt-1">Solve MCQs and descriptive questions regularly.</p>
                        </div>
                        <div class="timeline-item">
                            <h4 class="text-[var(--gold)] font-bold text-sm">Step 3: Mock Tests</h4>
                            <p class="text-xs text-gray-400 mt-1">Take regular mock tests and analyze performance.</p>
                        </div>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">9. Mains Subjects Breakdown üìä</h2>
                    <div class="space-y-3 text-sm text-gray-300">
                        <div class="p-3 bg-gray-800 rounded border border-gray-600">
                            <strong>Paper 1:</strong> Technical Subjects (Core Discipline).
                        </div>
                        <div class="p-3 bg-gray-800 rounded border border-gray-600">
                            <strong>Paper 2:</strong> General Aptitude (GK, Language).
                        </div>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">10. What NOT to Do üö´</h2>
                    <div class="space-y-2 text-sm text-gray-300">
                        <div class="flex items-start bg-red-900/20 p-2 rounded">
                            <span class="mr-2">‚ùå</span><span>Don't neglect non-technical subjects.</span>
                        </div>
                        <div class="flex items-start bg-red-900/20 p-2 rounded">
                            <span class="mr-2">‚ùå</span><span>Don't skip answer writing practice.</span>
                        </div>
                        <div class="flex items-start bg-red-900/20 p-2 rounded">
                            <span class="mr-2">‚ùå</span><span>Don't skip Mock Tests.</span>
                        </div>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">11. Institutions üè´</h2>
                    <div class="mb-4">
                        <h4 class="text-[var(--gold)] font-bold text-sm mb-2">Government Funded</h4>
                        <p class="text-xs text-gray-400">Govt Engineering Colleges, Technical Education Directorates.</p>
                    </div>
                    <div>
                        <h4 class="text-[var(--gold)] font-bold text-sm mb-2">Private Hubs</h4>
                        <p class="text-xs text-gray-400">Made Easy, ACE Academy, IES Master, etc.</p>
                    </div>
                </section>

                <section class="upsc-card">
                    <h2 class="upsc-heading">12. Career Roadmap üöÄ</h2>
                    <p class="text-sm text-gray-300 mb-4">Engineers have a lucrative career path with promotions up to Chief Engineer.</p>
                    <button class="upsc-btn" onclick="openSubModal('sub-roadmap')">View Career Ladder</button>
                </section>

            </div>
        </div>
    </div>


    <div id="sub-services" class="upsc-sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-services')">&times;</button>
            <h3 class="text-2xl font-bold text-[var(--gold)] mb-6 sticky top-0 bg-[#1A1C20] pb-2 border-b border-gray-700">Engineering Posts</h3>
            
            <div class="service-group">
                <h4>Gazetted</h4>
                <div class="service-item">
                    <strong>1. Assistant Engineer (AE)</strong>
                    <p>Gazetted post. Responsible for planning, design, and management of projects.</p>
                </div>
            </div>

            <div class="service-group">
                <h4>Non-Gazetted</h4>
                <div class="service-item">
                    <strong>2. Junior Engineer (JE)</strong>
                    <p>Supervises project implementation and maintenance. Field work.</p>
                </div>
                <div class="service-item">
                    <strong>3. Sub-Engineer</strong>
                    <p>Assists JE in technical tasks.</p>
                </div>
                 <div class="service-item">
                    <strong>4. Section Engineer</strong>
                    <p>In-charge of specific sections in railways or large projects.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="sub-prelims" class="upsc-sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-prelims')">&times;</button>
            <h3 class="text-2xl font-bold text-[var(--gold)] mb-4">Stage 1: Written Exam</h3>
            <p class="text-sm text-gray-400 mb-6">Objective Type (MCQ). Screening Test.</p>
            
            <div class="bg-gray-800 rounded-xl p-4 mb-4 border border-gray-600">
                <h4 class="text-lg font-bold text-white mb-2">Exam Content</h4>
                <p class="text-xs text-gray-400 mb-2">Questions on:</p>
                <ul class="text-sm text-gray-300 list-disc ml-5 space-y-1">
                    <li>General Knowledge & Current Affairs</li>
                    <li>General Hindi & English</li>
                    <li>Core Technical Subjects (Civil/Mech/Elec)</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="sub-mains" class="upsc-sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-mains')">&times;</button>
            <h3 class="text-2xl font-bold text-[var(--gold)] mb-4">Stage 2: Main Exam</h3>
            <p class="text-sm text-gray-300 mb-4">
                Descriptive Written Exam. Determines Merit.
            </p>
            <div class="bg-gray-800 rounded-xl p-4 mb-4 border border-gray-600">
                <h4 class="text-lg font-bold text-white mb-2">Technical Paper I</h4>
                <p class="text-xs text-gray-400">Core engineering subjects related to discipline.</p>
            </div>
            <div class="bg-gray-800 rounded-xl p-4 mb-4 border border-gray-600">
                <h4 class="text-lg font-bold text-white mb-2">Technical Paper II</h4>
                <p class="text-xs text-gray-400">Advanced/Specialized topics in engineering.</p>
            </div>
             <div class="bg-gray-800 rounded-xl p-4 border border-gray-600">
                <h4 class="text-lg font-bold text-white mb-2">General Aptitude</h4>
                <p class="text-xs text-gray-400">GK, Language, Reasoning (sometimes included).</p>
            </div>
        </div>
    </div>

    <div id="sub-interview" class="upsc-sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-interview')">&times;</button>
            <h3 class="text-2xl font-bold text-[var(--gold)] mb-4">Stage 3: Interview</h3>
            <p class="text-sm text-gray-300 mb-4">
                Personality Test / Viva Voce.
            </p>
            <ul class="list-disc ml-5 space-y-2 text-sm text-gray-400">
                <li><strong>Assessment:</strong> Technical knowledge, personality, administrative ability.</li>
                <li><strong>Skills:</strong> Communication, problem-solving, leadership.</li>
            </ul>
        </div>
    </div>

    <div id="sub-syllabus" class="upsc-sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-syllabus')">&times;</button>
            <h3 class="text-2xl font-bold text-[var(--gold)] mb-4">Detailed Syllabus Breakdown</h3>
            
            <div class="service-group">
                <h4>Technical Subjects</h4>
                <ul class="styled-list text-sm text-gray-300">
                    <li><span class="icon">‚Ä¢</span> <strong>Civil:</strong> SOM, Structural Analysis, RCC, Soil Mech, etc.</li>
                    <li><span class="icon">‚Ä¢</span> <strong>Mechanical:</strong> Thermo, TOM, FM, Manufacturing, etc.</li>
                    <li><span class="icon">‚Ä¢</span> <strong>Electrical:</strong> Circuits, Machines, Power Systems, etc.</li>
                </ul>
            </div>

            <div class="service-group">
                <h4>General Knowledge</h4>
                <ul class="styled-list text-sm text-gray-300">
                    <li><span class="icon">‚Ä¢</span> State GK (History, Geography).</li>
                    <li><span class="icon">‚Ä¢</span> Current Affairs.</li>
                </ul>
            </div>

            <div class="service-group">
                <h4>Language</h4>
                <ul class="styled-list text-sm text-gray-300">
                    <li><span class="icon">‚Ä¢</span> General Hindi & English Grammar.</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="sub-roadmap" class="upsc-sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-roadmap')">&times;</button>
            <h3 class="text-2xl font-bold text-[var(--gold)] mb-6 text-center">Engineering Career Progression</h3>
            
            <div class="space-y-6 relative border-l-2 border-[var(--gold)] pl-6 ml-4">
                <div class="relative">
                    <div class="absolute -left-[31px] top-0 w-4 h-4 rounded-full bg-[var(--gold)] border-2 border-black"></div>
                    <h4 class="text-lg font-bold text-white">1. Entry Level</h4>
                    <p class="text-sm text-gray-400">Junior Engineer / Assistant Engineer. Project execution and technical tasks.</p>
                </div>
                
                <div class="relative">
                    <div class="absolute -left-[31px] top-0 w-4 h-4 rounded-full bg-[var(--gold)] border-2 border-black"></div>
                    <h4 class="text-lg font-bold text-white">2. Mid Level (8-10 Years)</h4>
                    <p class="text-sm text-gray-400">Executive Engineer. Division Head. Admin & Tech responsibilities.</p>
                </div>

                <div class="relative">
                    <div class="absolute -left-[31px] top-0 w-4 h-4 rounded-full bg-[var(--gold)] border-2 border-black"></div>
                    <h4 class="text-lg font-bold text-white">3. Senior Level</h4>
                    <p class="text-sm text-gray-400">Superintending Engineer. Circle Head.</p>
                </div>

                <div class="relative">
                    <div class="absolute -left-[31px] top-0 w-4 h-4 rounded-full bg-[var(--gold)] border-2 border-black"></div>
                    <h4 class="text-lg font-bold text-white">4. Top Level</h4>
                    <p class="text-sm text-gray-400">Chief Engineer. Highest technical post in department.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- GOOGLE SHEETS CONNECTION CONFIGURATION ---
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby4iiSGL8AogqYasU1MYOxnG4GT2CqoERQIaPKMplMFWU19wgcbZIE3SINTvRh74dGl/exec';

        // --- PROFILE LOGIC ---
        function checkProfile() {
            const profileData = localStorage.getItem('userProfileENGINEERING');
            if (profileData) {
                unlockInterface();
                loadProfile(JSON.parse(profileData));
                return true;
            } else {
                lockInterface();
                document.getElementById('profile-setup').style.display = 'block';
                document.getElementById('profile-view').style.display = 'none';
                return false;
            }
        }

        function lockInterface() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                if (item.id !== 'nav-profile') {
                    item.classList.add('locked');
                    item.classList.remove('active');
                } else {
                    item.classList.add('active');
                }
            });
            document.querySelectorAll('.modal-overlay').forEach(el => el.classList.remove('active'));
            document.getElementById('modal-profile').classList.add('active');
        }

        function unlockInterface() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('locked'));
        }

        function saveProfile(e) {
            e.preventDefault();
            
            const btn = document.getElementById('submit-btn');
            const spinner = document.getElementById('loading-spinner');
            const btnText = btn.querySelector('span');

            const form = document.getElementById('registration-form');
            const formData = new FormData(form);
            const dataObj = Object.fromEntries(formData.entries());

            btn.disabled = true;
            btnText.textContent = "Registering...";
            spinner.style.display = 'inline-block';

            fetch(SCRIPT_URL, {
                method: 'POST',
                body: formData,
                mode: 'no-cors' 
            })
            .then(() => {
                console.log('Request sent successfully (no-cors mode)');
                finalizeProfile(dataObj);
            })
            .catch(error => {
                console.error('Error!', error.message);
                alert("Network issue. Saving locally so you can continue.");
                finalizeProfile(dataObj);
            });
        }

        function finalizeProfile(data) {
            localStorage.setItem('userProfileENGINEERING', JSON.stringify(data));
            document.getElementById('submit-btn').disabled = false;
            document.getElementById('submit-btn').querySelector('span').textContent = "Complete Registration";
            document.getElementById('loading-spinner').style.display = 'none';
            unlockInterface();
            loadProfile(data);
            setTimeout(() => {
                activateTab(document.getElementById('nav-upsc'), 'upsc');
            }, 500);
        }

        function loadProfile(data) {
            document.getElementById('profile-setup').style.display = 'none';
            document.getElementById('profile-view').style.display = 'block';

            document.getElementById('display-name').textContent = data.name;
            document.getElementById('display-phone').textContent = data.phone;
            document.getElementById('display-email').textContent = data.email;
            document.getElementById('display-gender').textContent = data.gender;
            document.getElementById('display-place').textContent = data.place;
            document.getElementById('display-date').textContent = data.startDate;
            
            const start = new Date(data.startDate);
            const now = new Date();
            const diffTime = Math.abs(now - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
            document.getElementById('display-days').textContent = isNaN(diffDays) ? 0 : diffDays;
        }

        function resetProfile() {
            if(confirm("Are you sure? All data will be cleared and you will be locked out until you register again.")) {
                localStorage.removeItem('userProfileENGINEERING');
                location.reload();
            }
        }

        // --- TAB NAVIGATION LOGIC ---
        function activateTab(element, tabId) {
            const hasProfile = localStorage.getItem('userProfileENGINEERING');
            if (!hasProfile && tabId !== 'profile') {
                alert("üîí Please complete your profile registration to access this section.");
                activateTab(document.getElementById('nav-profile'), 'profile');
                return;
            }
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            if(element) element.classList.add('active');
            document.querySelectorAll('.modal-overlay').forEach(el => el.classList.remove('active'));
            const target = document.getElementById(`modal-${tabId}`);
            if(target) target.classList.add('active');
        }

        // --- SUB-MODAL LOGIC ---
        function openSubModal(id) {
            document.getElementById(id).classList.add('active');
        }
        function closeSubModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        // --- CHARTS INITIALIZATION ---
        document.addEventListener("DOMContentLoaded", function() {
            const hasProfile = checkProfile();
            if(hasProfile) {
                activateTab(document.getElementById('nav-upsc'), 'upsc');
            }

            Chart.defaults.color = '#fff';
            Chart.defaults.font.family = "'Plus Jakarta Sans', sans-serif";

            // Age Relaxation Chart (Adapted for Engineering)
            const ctx1 = document.getElementById('attemptsChart').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ['General', 'SC/ST/OBC', 'PwD', 'Ex-Servicemen'],
                    datasets: [{
                        label: 'Age Relaxation (Years)',
                        data: [0, 5, 10, 5], 
                        backgroundColor: ['#333', '#FFD700', '#B8860B', '#A37A00'],
                        borderColor: '#000',
                        borderWidth: 1,
                        borderRadius: 6
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { 
                            grid: { color: '#333' }, 
                            ticks: { color: '#aaa' } 
                        },
                        y: { grid: { display: false }, ticks: { color: '#fff', font: {weight: 'bold'} } }
                    }
                }
            });

            // Competency Chart (Focusing on Skills like Civil/Mech/Elec, Aptitude)
            const ctx2 = document.getElementById('competencyChart').getContext('2d');
            new Chart(ctx2, {
                type: 'bubble',
                data: {
                    labels: ['Civil Engg', 'Mech Engg', 'Elec Engg', 'General Aptitude', 'State GK', 'Language'],
                    datasets: [{
                        label: 'Key Competencies',
                        data: [
                            {x: 4.5, y: 4.5, r: 22}, // Core Engg (Most Imp)
                            {x: 4.5, y: 4.5, r: 22}, // (Overlapping for demo)
                            {x: 4.5, y: 4.5, r: 22}, // 
                            {x: 3.5, y: 3.5, r: 15}, // Aptitude
                            {x: 3, y: 3, r: 12},     // State GK
                            {x: 2.5, y: 2.5, r: 10}  // Language
                        ],
                        backgroundColor: 'rgba(255, 215, 0, 0.7)',
                        borderColor: '#fff',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { display: false, min: 0, max: 5 },
                        y: { display: false, min: 0, max: 5 }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const labels = ['Civil Engg', 'Mech Engg', 'Elec Engg', 'General Aptitude', 'State GK', 'Language'];
                                    return labels[context.dataIndex];
                                }
                            }
                        }
                    }
                }
            });
        });

        window.onclick = function(event) {
            if (event.target.classList.contains('upsc-sub-modal')) {
                event.target.classList.remove('active');
            }
        }
    </script>
</body>
</html>
