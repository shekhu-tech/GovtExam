<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>RRB NTPC Guide & Profile</title>
    <script src="/app-redirect.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700;800&family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- MAIN APP THEME (Blue/Gold/Dark) --- */
        :root {
            --primary: #2563eb; /* Royal Blue */
            --bg-dark: #020202;
            --gold: #FFD700; 
            --gold-dim: rgba(255, 215, 0, 0.3);
            --header-offset: calc(15px + env(safe-area-inset-top));
            --header-height: 70px; 
            --footer-offset: calc(30px + env(safe-area-inset-bottom));
            --footer-height: 75px; 
            --text-light: #ffffff; 
            --card-bg: #1A1C20;
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            margin: 0;
            overflow: hidden; 
            height: 100vh;
            width: 100vw;
        }

        /* --- BACKGROUND --- */
        #fixed-media-background {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            z-index: -10; background-size: cover; background-position: center;
            opacity: 0.4; 
            background-image: url('https://images.unsplash.com/photo-1474487548417-781cb714c22d?q=80&w=1470&auto=format&fit=crop');
            filter: brightness(30%) hue-rotate(200deg) contrast(120%) saturate(120%);
        }

        /* --- HEADER --- */
        .iphone-header {
            position: fixed; top: var(--header-offset); left: 50%; transform: translateX(-50%);
            width: 92%; max-width: 600px; height: var(--header-height);
            background: rgba(5, 4, 1, 0.96); backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 215, 0, 0.25); border-radius: 24px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; z-index: 3000; box-shadow: 0 5px 25px rgba(0,0,0,0.5);
        }
        .header-left img, .header-right img { 
            width: 38px; height: 38px; border-radius: 10px; 
            border: 2px solid var(--primary); box-shadow: 0 4px 6px rgba(0,0,0,0.5); 
            object-fit: cover;
        }
        .header-center { font-family: 'Rajdhani', sans-serif; font-size: 1.5rem; font-weight: 800; color: #fff; letter-spacing: 2px; }
        .header-center span { color: var(--gold); }

        /* --- DOCK NAVIGATION --- */
        .iphone-dock-wrapper { 
            position: fixed; bottom: var(--footer-offset); 
            left: 0; width: 100%; display: flex; justify-content: center; z-index: 3000; padding: 0 15px; 
        }
        .iphone-dock { 
            width: 100%; max-width: 500px; height: var(--footer-height); 
            background: rgba(5, 4, 1, 0.95); backdrop-filter: blur(40px); 
            border-radius: 35px; border: 1px solid rgba(255, 215, 0, 0.15); 
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 15px 40px rgba(0,0,0,0.9); padding: 0 12px; 
        }
        
        .nav-item { 
            flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; 
            color: #666; cursor: pointer; height: 100%; transition: all 0.3s ease;
            position: relative;
        }
        .nav-item .icon-box {
            width: 42px; height: 42px; display: flex; align-items: center; justify-content: center;
            border-radius: 14px; transition: all 0.3s; margin-bottom: 3px;
        }
        .nav-item i { font-size: 1.25rem; transition: 0.3s; }
        .nav-item span { font-size: 0.55rem; font-weight: 700; text-transform: uppercase; opacity: 0.7; }

        /* Locked State Visuals */
        .nav-item.locked { opacity: 0.3; pointer-events: none; filter: grayscale(100%); }
        
        /* Active State */
        .nav-item.active { color: var(--gold); opacity: 1; pointer-events: auto; filter: none; }
        .nav-item.active .icon-box {
            background: rgba(255, 215, 0, 0.15); border: 1px solid var(--gold); 
            transform: translateY(-5px); 
        }
        
        /* Guide Tab Specific */
        .nav-item.guide-tab.active { color: var(--gold); }
        .nav-item.guide-tab.active .icon-box {
            background: rgba(255, 215, 0, 0.15); border: 1px solid var(--gold);
            box-shadow: 0 0 15px var(--gold-dim);
        }

        /* --- MAIN CONTENT MODALS --- */
        .modal-overlay { 
            position: fixed; 
            top: calc(var(--header-offset) + var(--header-height) + 12px);
            bottom: calc(var(--footer-offset) + var(--footer-height) + 12px);
            left: 0; right: 0; z-index: 2500; 
            display: none; justify-content: center; padding: 0 12px; pointer-events: none;
        }
        .modal-overlay.active { display: flex !important; }
        .modal-box { 
            pointer-events: auto; background: rgba(10, 8, 2, 0.95); border: 1px solid rgba(255,215,0,0.3); 
            border-radius: 32px; width: 100%; max-width: 600px; height: 100%; 
            padding: 20px; box-shadow: 0 0 50px rgba(0,0,0,0.8); 
            display: flex; flex-direction: column; overflow: hidden; position: relative;
        }

        /* Scrollable Content Area */
        .scroll-content { flex-grow: 1; overflow-y: auto; padding-right: 5px; -webkit-overflow-scrolling: touch; }
        .scroll-content::-webkit-scrollbar { width: 4px; }
        .scroll-content::-webkit-scrollbar-thumb { background: #333; border-radius: 2px; }

        /* --- CONTENT STYLES --- */
        .guide-container { color: #f3f4f6; font-family: 'Inter', sans-serif; }
        .section-heading { 
            color: var(--gold); font-family: 'Rajdhani', sans-serif; font-weight: 700; 
            border-bottom: 2px solid var(--gold); padding-bottom: 5px; margin-bottom: 15px; display: inline-block;
            font-size: 1.5rem;
        }
        .content-card {
            background: var(--card-bg); border: 1px solid #A37A00; border-radius: 16px;
            padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s;
        }
        .content-card:hover { transform: translateY(-2px); border-color: var(--gold); }
        .action-btn {
            background: linear-gradient(135deg, #FFC107, #B8860B); color: #000; padding: 10px 20px; border-radius: 12px;
            font-weight: 700; font-size: 0.9rem; cursor: pointer; border: none;
            transition: all 0.2s; display: inline-block; margin-top: 10px; width: 100%;
            text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        .action-btn:active { transform: scale(0.98); }
        
        .action-btn-secondary {
            background: transparent; border: 1px solid var(--gold); color: var(--gold);
            margin-top: 8px;
        }
        .action-btn-secondary:hover { background: rgba(255, 215, 0, 0.1); }
        
        /* Flowchart */
        .flowchart-flex { display: flex; flex-direction: column; align-items: center; gap: 15px; margin: 20px 0; }
        @media(min-width: 600px) { .flowchart-flex { flex-direction: row; justify-content: center; } }
        .flowchart-step {
            width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--gold);
            display: flex; align-items: center; justify-content: center; text-align: center;
            font-weight: 700; color: var(--gold); background: #26292E; cursor: pointer;
            transition: all 0.3s; flex-shrink: 0;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
        }
        .flowchart-step:hover { background: var(--gold); color: #000; box-shadow: 0 0 20px var(--gold); transform: scale(1.05); }
        .arrow-down { font-size: 2rem; color: var(--gold); }
        @media(min-width: 600px) { .arrow-down { transform: rotate(-90deg); } }

        /* Timeline */
        .timeline-item { 
            border-left: 3px solid var(--gold); padding-left: 20px; margin-left: 10px; 
            padding-bottom: 20px; position: relative; 
        }
        .timeline-item::before {
            content: ''; position: absolute; left: -10px; top: 0; width: 17px; height: 17px;
            background: var(--gold); border-radius: 50%; border: 3px solid #1A1C20;
        }

        /* --- JOB CARDS GRID (FIXED FOR OVERFLOW) --- */
        .job-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Strictly 2 columns */
            gap: 10px; 
            margin-top: 15px;
            width: 100%;
        }
        .job-card {
            background: #25282C; 
            border: 1px solid rgba(255,215,0,0.2); 
            border-radius: 14px;
            padding: 12px; 
            text-align: center; 
            cursor: pointer; 
            transition: 0.3s;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            min-height: 110px; 
            box-sizing: border-box;
        }
        .job-card:hover { border-color: var(--gold); background: rgba(255,215,0,0.1); transform: translateY(-3px); }
        .job-icon { font-size: 2rem; margin-bottom: 8px; }
        .job-title { font-weight: 700; color: #fff; font-size: 0.8rem; margin-bottom: 4px; }
        .job-badge { 
            font-size: 0.65rem; color: var(--gold); text-transform: uppercase; 
            border: 1px solid var(--gold); padding: 2px 8px; border-radius: 10px;
        }


        /* --- NESTED SUB-MODALS --- */
        .sub-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(10px); z-index: 4000;
            display: flex; align-items: center; justify-content: center;
            opacity: 0; visibility: hidden; transition: 0.3s; padding: 20px;
        }
        .sub-modal.active { opacity: 1; visibility: visible; }
        .sub-modal-content {
            background: #1A1C20; border: 1px solid var(--gold); width: 100%; max-width: 600px;
            max-height: 85vh; overflow-y: auto; border-radius: 20px; padding: 25px;
            position: relative; color: #fff; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }
        .close-sub-btn {
            position: absolute; top: 15px; right: 15px; font-size: 1.5rem; color: var(--gold);
            background: none; border: none; cursor: pointer; z-index: 10;
        }

        /* --- VACANT/PLACEHOLDER TABS --- */
        .vacant-msg {
            height: 100%; display: flex; align-items: center; justify-content: center;
            flex-direction: column; color: #555; text-align: center;
        }
        .vacant-msg i { font-size: 3rem; margin-bottom: 10px; color: #333; }
        
        /* --- PROFILE STYLES --- */
        .profile-setup-card {
            background: linear-gradient(180deg, rgba(30,30,30,0.9) 0%, rgba(10,10,10,0.95) 100%);
            border: 1px solid rgba(255, 215, 0, 0.2);
            padding: 20px;
            border-radius: 20px;
            margin-top: 10px;
        }
        .profile-form-container { display: flex; flex-direction: column; gap: 15px; }
        .form-group { position: relative; }
        .form-group label { 
            display: block; color: var(--gold); margin-bottom: 6px; font-size: 0.85rem; 
            font-weight: 600; text-transform: uppercase; letter-spacing: 1px;
        }
        .form-group input, .form-group select {
            width: 100%; padding: 14px 16px; background: rgba(0,0,0,0.4); 
            border: 1px solid #444; color: #fff;
            border-radius: 12px; outline: none; transition: 0.3s; font-size: 1rem;
        }
        .form-group input:focus, .form-group select:focus { 
            border-color: var(--gold); box-shadow: 0 0 10px rgba(255, 215, 0, 0.1); 
            background: rgba(0,0,0,0.6);
        }
        
        /* Profile View */
        .profile-header-card {
            background: linear-gradient(135deg, #1a1c20 0%, #000 100%);
            border: 1px solid var(--gold); border-radius: 24px;
            padding: 25px; position: relative; overflow: hidden;
            text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .profile-header-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 80px;
            background: linear-gradient(90deg, #B8860B, #FFD700); opacity: 0.2;
        }
        .profile-avatar-large {
            width: 90px; height: 90px; border-radius: 50%;
            background: #000; border: 3px solid var(--gold);
            margin: 30px auto 15px; position: relative; z-index: 2;
            display: flex; align-items: center; justify-content: center;
            color: var(--gold); font-size: 2.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .profile-info-grid { display: grid; grid-cols-1 gap: 15px; margin-top: 25px; }
        .info-row {
            display: flex; align-items: center; background: rgba(255,255,255,0.03);
            padding: 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.05);
        }
        .info-icon {
            width: 40px; height: 40px; border-radius: 10px; background: rgba(255, 215, 0, 0.1);
            color: var(--gold); display: flex; align-items: center; justify-content: center;
            margin-right: 15px; font-size: 1.1rem;
        }
        .info-text label { display: block; font-size: 0.7rem; color: #888; text-transform: uppercase; }
        .info-text span { display: block; font-size: 0.95rem; color: #fff; font-weight: 600; }

        /* Loader */
        .loader {
            border: 3px solid #f3f3f3; border-top: 3px solid var(--gold);
            border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite;
            display: inline-block; vertical-align: middle; margin-left: 10px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

    </style>
</head>
<body>
    
    <div id="fixed-media-background"></div>

    <header class="iphone-header">
        <div class="header-left"><img src="sti.png" alt="Logo" onerror="this.src='https://placehold.co/40x40/333/FFF?text=S'"></div>
        <div class="header-center">RRB NTPC<span></span></div>
        <div class="header-right"><img src="ytglogo.png" alt="User" onerror="this.src='https://placehold.co/40x40/333/FFF?text=U'"></div>
    </header>

    <div class="iphone-dock-wrapper">
        <nav class="iphone-dock">
            <div class="nav-item active" id="nav-profile" onclick="activateTab(this, 'profile')">
                <div class="icon-box"><i class="fas fa-user-circle"></i></div><span></span>
            </div>
            <div class="nav-item locked" id="nav-posts" onclick="activateTab(this, 'posts')">
                <div class="icon-box"><i class="fas fa-list-ul"></i></div><span></span>
            </div>
            
            <div class="nav-item guide-tab locked" id="nav-guide" onclick="activateTab(this, 'guide')">
                <div class="icon-box"><i class="fas fa-train"></i></div><span>RRB-NTPC</span>
            </div>
            
            <div class="nav-item locked" id="nav-syllabus" onclick="activateTab(this, 'syllabus')">
                <div class="icon-box"><i class="fas fa-book-open"></i></div><span></span>
            </div>
            <div class="nav-item locked" id="nav-news" onclick="activateTab(this, 'news')">
                <div class="icon-box"><i class="fas fa-newspaper"></i></div><span></span>
            </div>
        </nav>
    </div>

    <div id="modal-profile" class="modal-overlay active">
        <div class="modal-box" style="border-color: var(--gold);">
            <div class="scroll-content guide-container">
                
                <div id="profile-setup">
                    <div class="text-center mb-6">
                        <i class="fas fa-shield-alt text-4xl text-[var(--gold)] mb-3"></i>
                        <h2 class="text-2xl font-bold text-white">Aspirant Registration</h2>
                        <p class="text-gray-400 text-sm mt-1">Complete your profile to unlock the application.</p>
                    </div>

                    <div class="profile-setup-card">
                        <form id="registration-form" onsubmit="saveProfile(event)" class="profile-form-container">
                            <input type="hidden" name="sheetName" value="RRB-NTPC"> 
                            
                            <div class="form-group">
                                <label><i class="fas fa-user mr-2"></i>Full Name</label>
                                <input type="text" name="name" id="user-name" placeholder="Ex: Rahul Kumar" required>
                            </div>
                            
                            <div class="grid grid-cols-2 gap-3">
                                <div class="form-group">
                                    <label><i class="fas fa-phone mr-2"></i>Mobile</label>
                                    <input type="tel" name="phone" id="user-phone" placeholder="9876543210" required>
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-venus-mars mr-2"></i>Gender</label>
                                    <select name="gender" id="user-gender" required>
                                        <option value="">Select</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label><i class="fas fa-envelope mr-2"></i>Email Address</label>
                                <input type="email" name="email" id="user-email" placeholder="aspirant@gmail.com" required>
                            </div>

                            <div class="form-group">
                                <label><i class="fas fa-map-marker-alt mr-2"></i>Current Place (City/State)</label>
                                <input type="text" name="place" id="user-place" placeholder="Ex: Karol Bagh, Delhi" required>
                            </div>

                            <div class="form-group">
                                <label><i class="fas fa-calendar-alt mr-2"></i>Preparation Start Date</label>
                                <input type="date" name="startDate" id="user-date" required>
                            </div>

                            <button type="submit" id="submit-btn" class="action-btn mt-4">
                                <span>Complete Registration</span>
                                <div id="loading-spinner" class="loader" style="display:none;"></div>
                            </button>
                            <p class="text-xs text-center text-gray-500 mt-2"><i class="fas fa-lock mr-1"></i> Data is secure & required for access.</p>
                        </form>
                    </div>
                </div>

                <div id="profile-view" style="display:none;">
                    <h2 class="section-heading">My Profile üë§</h2>
                    
                    <div class="profile-header-card">
                        <div class="profile-header-bg"></div>
                        <div class="profile-avatar-large">
                            <i class="fas fa-subway"></i>
                        </div>
                        <h3 id="display-name" class="text-2xl font-bold text-white mb-1 tracking-wide">User Name</h3>
                        <p class="text-[var(--gold)] text-sm font-bold uppercase tracking-widest mb-4">RRB NTPC Aspirant</p>
                        
                        <div class="flex justify-center gap-4 text-center border-t border-gray-800 pt-4">
                             <div>
                                 <span class="block text-xl font-bold text-white" id="display-days">0</span>
                                 <span class="text-xs text-gray-500 uppercase">Days Prep</span>
                             </div>
                             <div class="w-px bg-gray-700"></div>
                             <div>
                                 <span class="block text-xl font-bold text-white" id="display-gender">-</span>
                                 <span class="text-xs text-gray-500 uppercase">Gender</span>
                             </div>
                        </div>
                    </div>

                    <div class="profile-info-grid">
                        <div class="info-row">
                            <div class="info-icon"><i class="fas fa-envelope"></i></div>
                            <div class="info-text">
                                <label>Email Address</label>
                                <span id="display-email">email@example.com</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-icon"><i class="fas fa-phone-alt"></i></div>
                            <div class="info-text">
                                <label>Mobile Number</label>
                                <span id="display-phone">+91 XXXXX XXXXX</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-icon"><i class="fas fa-map-marker-alt"></i></div>
                            <div class="info-text">
                                <label>Location</label>
                                <span id="display-place">Delhi, India</span>
                            </div>
                        </div>
                         <div class="info-row">
                            <div class="info-icon"><i class="fas fa-flag-checkered"></i></div>
                            <div class="info-text">
                                <label>Start Date</label>
                                <span id="display-date">01-01-2024</span>
                            </div>
                        </div>
                    </div>
                    
                    <button class="action-btn action-btn-secondary mt-8" onclick="resetProfile()">
                        <i class="fas fa-sign-out-alt mr-2"></i> Reset Profile & Logout
                    </button>
                </div>

            </div>
        </div>
    </div>

    <div id="modal-posts" class="modal-overlay">
         <div class="modal-box" style="border-color: var(--gold);">
            <div class="scroll-content guide-container">
                <h2 class="section-heading">Job Profiles üìã</h2>
                <div id="full-post-list" class="space-y-3">
                    </div>
            </div>
        </div>
    </div>
    
    <div id="modal-syllabus" class="modal-overlay">
        <div class="modal-box" style="border-color: var(--gold);">
            <div class="scroll-content guide-container">
                 <h2 class="section-heading">Detailed Syllabus üìö</h2>
                 <div class="space-y-4">
                    <div class="bg-gray-800 p-3 rounded border border-gray-700">
                        <h4 class="font-bold text-white mb-2">1. Mathematics</h4>
                        <p class="text-xs text-gray-400">Number System, Decimals, Fractions, LCM, HCF, Ratio and Proportion, Percentage, Mensuration, Time and Work, Time and Distance, Simple and Compound Interest, Profit and Loss, Elementary Algebra, Geometry and Trigonometry, Elementary Statistics.</p>
                    </div>
                    <div class="bg-gray-800 p-3 rounded border border-gray-700">
                        <h4 class="font-bold text-white mb-2">2. General Intelligence & Reasoning</h4>
                        <p class="text-xs text-gray-400">Analogies, Completion of Number and Alphabetical Series, Coding and Decoding, Mathematical Operations, Similarities and Differences, Relationships, Analytical Reasoning, Syllogism, Jumbling, Venn Diagrams, Puzzle, Data Sufficiency, Statement- Conclusion, Statement- Courses of Action, Decision Making, Maps, Interpretation of Graphs.</p>
                    </div>
                     <div class="bg-gray-800 p-3 rounded border border-gray-700">
                        <h4 class="font-bold text-white mb-2">3. General Awareness</h4>
                        <p class="text-xs text-gray-400">Current Events of National and International Importance, Games and Sports, Art and Culture of India, Indian Literature, Monuments and Places of India, General Science and Life Science (up to 10th CBSE), History of India and Freedom Struggle, Physical, Social and Economic Geography of India and World, Indian Polity and Governance- constitution and political system.</p>
                    </div>
                 </div>
            </div>
        </div>
    </div>
    
    <div id="modal-news" class="modal-overlay">
        <div class="modal-box"><div class="vacant-msg"><i class="fas fa-newspaper"></i><h2>Notifications</h2><p>Latest RRB updates will appear here.</p></div></div>
    </div>

    <div id="modal-guide" class="modal-overlay">
        <div class="modal-box" style="border-color: var(--gold);">
            <div class="scroll-content guide-container">
                
                <section class="content-card">
                    <h2 class="section-heading">1. What is RRB NTPC? ü§î</h2>
                    <p class="text-gray-300 text-sm mb-4 leading-relaxed">
                        RRB NTPC (Non-Technical Popular Categories) is a massive recruitment drive for graduates and undergraduates in Indian Railways.
                    </p>
                    <div class="job-grid">
                        <div class="job-card" onclick="openSubModal('sub-sm')">
                            <div class="job-icon">üöâ</div>
                            <div class="job-title">Station Master</div>
                            <div class="job-badge">View</div>
                        </div>
                        <div class="job-card" onclick="openSubModal('sub-gg')">
                            <div class="job-icon">üöÇ</div>
                            <div class="job-title">Goods Guard</div>
                            <div class="job-badge">View</div>
                        </div>
                        <div class="job-card" onclick="openSubModal('sub-cc')">
                            <div class="job-icon">üéüÔ∏è</div>
                            <div class="job-title">Comm. Clerk</div>
                            <div class="job-badge">View</div>
                        </div>
                        <div class="job-card" onclick="openSubModal('sub-ta')">
                            <div class="job-icon">üö¶</div>
                            <div class="job-title">Traffic Asst.</div>
                            <div class="job-badge">View</div>
                        </div>
                    </div>
                    <button class="action-btn action-btn-secondary" onclick="activateTab(document.getElementById('nav-posts'), 'posts')">View All Job Profiles</button>
                </section>

                <section class="content-card">
                    <h2 class="section-heading">2. Exam Process üéØ</h2>
                    <p class="text-gray-300 text-sm text-center mb-4">Selection involves multiple stages.</p>
                    <div class="flowchart-flex">
                        <div class="flowchart-step" onclick="openSubModal('sub-cbt1')">
                            <div>Step 1<br><span class="text-white text-xs opacity-80">CBT-1</span></div>
                        </div>
                        <div class="arrow-down">‚ûú</div>
                        <div class="flowchart-step" onclick="openSubModal('sub-cbt2')">
                            <div>Step 2<br><span class="text-white text-xs opacity-80">CBT-2</span></div>
                        </div>
                        <div class="arrow-down">‚ûú</div>
                        <div class="flowchart-step" onclick="openSubModal('sub-skill')">
                            <div>Step 3<br><span class="text-white text-xs opacity-80">Skill Test</span></div>
                        </div>
                    </div>
                </section>

                <section class="content-card">
                    <h2 class="section-heading">3. Eligibility & Pattern ‚úÖ</h2>
                    <ul class="text-sm text-gray-300 space-y-3">
                        <li class="flex items-start"><span class="text-lg text-[var(--gold)] mr-2">üéì</span><strong>Qualification:</strong> 12th Pass (Undergraduate) OR Graduate.</li>
                        <li class="flex items-start"><span class="text-lg text-[var(--gold)] mr-2">üéÇ</span><strong>Age Limit:</strong> 18-30 (UG) / 18-33 (Grad) years.</li>
                    </ul>
                    <div class="mt-4">
                         <h3 class="text-[var(--gold)] text-sm font-bold mb-2 text-center">CBT-1 Exam Pattern (100 Marks)</h3>
                         <div class="h-48 w-full">
                            <canvas id="examPatternChart"></canvas>
                        </div>
                    </div>
                </section>

                <section class="content-card">
                    <h2 class="section-heading">6. Career Opportunities üè¢</h2>
                    <p class="text-sm text-gray-300 mb-4">Excellent career progression in Railways.</p>
                    <div class="timeline-item">
                        <h4 class="text-[var(--gold)] font-bold text-sm">Level 1: Entry Level</h4>
                        <p class="text-xs text-gray-400 mt-1">Junior Clerk / Ticket Clerk.</p>
                    </div>
                    <div class="timeline-item">
                        <h4 class="text-[var(--gold)] font-bold text-sm">Level 2: Senior Level</h4>
                        <p class="text-xs text-gray-400 mt-1">Senior Clerk / Goods Guard.</p>
                    </div>
                    <div class="timeline-item">
                        <h4 class="text-[var(--gold)] font-bold text-sm">Level 3: Supervisory</h4>
                        <p class="text-xs text-gray-400 mt-1">Station Master / Section Officer.</p>
                    </div>
                </section>

                <section class="content-card">
                    <h2 class="section-heading">7. Preparation Strategy üìà</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                        <div class="bg-gray-800 p-3 rounded border border-gray-700">
                            <strong class="text-[var(--gold)] block mb-1">üìö Academic</strong>
                            <p class="text-xs text-gray-400">Focus on Maths & Reasoning concepts. GA is vast‚Äîfocus on Current Affairs.</p>
                        </div>
                        <div class="bg-gray-800 p-3 rounded border border-gray-700">
                            <strong class="text-[var(--gold)] block mb-1">üéØ Skills</strong>
                            <p class="text-xs text-gray-400">Practice typing for Clerk posts. Prepare for CBAT for Station Master.</p>
                        </div>
                    </div>
                </section>

                <section class="content-card">
                    <h2 class="section-heading">8. What Not To Do üö´</h2>
                    <div class="space-y-2 text-sm text-gray-300">
                        <div class="flex items-start bg-red-900/20 p-2 rounded">
                            <span class="mr-2">‚ùå</span><span>Ignoring Skill Test (it's mandatory).</span>
                        </div>
                        <div class="flex items-start bg-red-900/20 p-2 rounded">
                            <span class="mr-2">‚ùå</span><span>Forgetting Negative Marking (1/3rd mark deducted).</span>
                        </div>
                        <div class="flex items-start bg-red-900/20 p-2 rounded">
                            <span class="mr-2">‚ùå</span><span>Resting after CBT-1 (Final selection depends on CBT-2).</span>
                        </div>
                    </div>
                </section>

                <section class="content-card">
                    <h2 class="section-heading">9. Timeline üóìÔ∏è</h2>
                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between border-b border-gray-700 pb-2">
                            <span class="text-[var(--gold)] font-bold">Notification</span>
                            <span class="text-gray-400">Irregular (Every 3-4 yrs)</span>
                        </div>
                        <div class="flex justify-between border-b border-gray-700 pb-2">
                            <span class="text-[var(--gold)] font-bold">CBT-1 Exam</span>
                            <span class="text-gray-400">6-12 Months after Notif.</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-[var(--gold)] font-bold">CBT-2 & Skill</span>
                            <span class="text-gray-400">Within 1 year of CBT-1</span>
                        </div>
                    </div>
                </section>

                <section class="content-card">
                    <h2 class="section-heading">10. Institutes üè´</h2>
                    <p class="text-xs text-gray-400 mb-2">Top coaching centers for RRB.</p>
                    <div class="grid grid-cols-2 gap-2 text-xs">
                         <div class="bg-gray-800 p-2 rounded text-center">Testbook</div>
                         <div class="bg-gray-800 p-2 rounded text-center">Adda247</div>
                         <div class="bg-gray-800 p-2 rounded text-center">Paramount</div>
                         <div class="bg-gray-800 p-2 rounded text-center">Mahendra's</div>
                    </div>
                </section>

            </div>
        </div>
    </div>

    <div id="sub-sm" class="sub-modal"><div class="sub-modal-content"><button class="close-sub-btn" onclick="closeSubModal('sub-sm')">&times;</button><h3 class="text-2xl font-bold text-[var(--gold)] mb-2">Station Master</h3><p class="text-gray-300">Prestigious post. Responsible for smooth/safe operation of a station, train movements, and supervising staff. Requires CBAT.</p></div></div>
    <div id="sub-gg" class="sub-modal"><div class="sub-modal-content"><button class="close-sub-btn" onclick="closeSubModal('sub-gg')">&times;</button><h3 class="text-2xl font-bold text-[var(--gold)] mb-2">Goods Guard</h3><p class="text-gray-300">In-charge of a freight train. Checks wagons, manages train documents, ensures safe operation during journey.</p></div></div>
    <div id="sub-cc" class="sub-modal"><div class="sub-modal-content"><button class="close-sub-btn" onclick="closeSubModal('sub-cc')">&times;</button><h3 class="text-2xl font-bold text-[var(--gold)] mb-2">Commercial Clerk</h3><p class="text-gray-300">Customer-facing role. Issues tickets at counters, makes reservations, handles parcel bookings.</p></div></div>
    <div id="sub-ta" class="sub-modal"><div class="sub-modal-content"><button class="close-sub-btn" onclick="closeSubModal('sub-ta')">&times;</button><h3 class="text-2xl font-bold text-[var(--gold)] mb-2">Traffic Assistant</h3><p class="text-gray-300">Assists Station Master in managing train traffic and signals. Requires CBAT.</p></div></div>

    <div id="sub-cbt1" class="sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-cbt1')">&times;</button>
            <h3 class="text-xl font-bold text-[var(--gold)] mb-4">CBT-1 (Screening)</h3>
            <ul class="list-disc ml-5 text-gray-300 space-y-2">
                <li><strong>Questions:</strong> 100</li>
                <li><strong>Marks:</strong> 100</li>
                <li><strong>Duration:</strong> 90 Minutes</li>
                <li><strong>Negative Marking:</strong> 1/3rd Mark</li>
            </ul>
        </div>
    </div>
    <div id="sub-cbt2" class="sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-cbt2')">&times;</button>
            <h3 class="text-xl font-bold text-[var(--gold)] mb-4">CBT-2 (Final Merit)</h3>
             <ul class="list-disc ml-5 text-gray-300 space-y-2">
                <li><strong>Questions:</strong> 120</li>
                <li><strong>Marks:</strong> 120</li>
                <li><strong>Duration:</strong> 90 Minutes</li>
                <li><strong>Negative Marking:</strong> 1/3rd Mark</li>
            </ul>
        </div>
    </div>
    <div id="sub-skill" class="sub-modal">
        <div class="sub-modal-content">
            <button class="close-sub-btn" onclick="closeSubModal('sub-skill')">&times;</button>
            <h3 class="text-xl font-bold text-[var(--gold)] mb-4">Skill Test</h3>
            <p class="text-gray-300 mb-2">Qualifying Nature.</p>
            <ul class="list-disc ml-5 text-gray-300 space-y-2">
                <li><strong>Typing Test:</strong> For Clerks & Typists</li>
                <li><strong>CBAT:</strong> Computer Based Aptitude Test for Station Master & Traffic Assistant</li>
            </ul>
        </div>
    </div>

    <script>
        // --- GOOGLE SHEETS CONNECTION ---
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby4iiSGL8AogqYasU1MYOxnG4GT2CqoERQIaPKMplMFWU19wgcbZIE3SINTvRh74dGl/exec';

        // --- POST DATA (From Original File) ---
        const allPosts = [
            { title: 'Junior Clerk Cum Typist', desc: 'A clerical post responsible for record keeping, handling correspondence, and data entry in various departments. Requires good typing skills.' },
            { title: 'Accounts Clerk Cum Typist', desc: 'Deals with managing financial records, reconciling bills, and handling transactions in finance/accounts departments.' },
            { title: 'Junior Time Keeper', desc: 'Responsible for keeping accurate records of train arrival and departure times in the operating department.' },
            { title: 'Trains Clerk', desc: 'Manages train-related documents such as coach composition, passenger charts, and freight details.' },
            { title: 'Commercial cum Ticket Clerk', desc: 'Customer-facing role responsible for issuing tickets, making reservations, and handling parcel bookings.' },
            { title: 'Traffic Assistant', desc: 'Assists Station Master in managing train traffic and signals. Requires CBAT.' },
            { title: 'Goods Guard', desc: 'In-charge of a freight train, responsible for checking wagons, managing train documents, and safe operation.' },
            { title: 'Senior Commercial Ticket Clerk', desc: 'Senior post to Ticket Clerk. Involves supervisory duties like managing larger booking offices.' },
            { title: 'Senior Clerk cum Typist', desc: 'Senior post to Junior Clerk with responsibilities like handling important files and supervising staff.' },
            { title: 'Junior Account Asst cum Typist', desc: 'Graduate-level post in accounts. Involves auditing bills, checking budgets, and assisting senior officers.' },
            { title: 'Senior Time Keeper', desc: 'Supervisory role managing schedules for a larger section and ensuring punctuality records.' },
            { title: 'Commercial Apprentice', desc: 'Trainee post for future supervisors in commercial dept (booking, parcels, marketing).' },
            { title: 'Station Master', desc: 'Prestigious post responsible for smooth/safe operation of a station. Requires CBAT.' }
        ];

        // --- PROFILE LOGIC ---
        function checkProfile() {
            const profileData = localStorage.getItem('userProfile');
            if (profileData) {
                unlockInterface();
                loadProfile(JSON.parse(profileData));
                return true;
            } else {
                lockInterface();
                document.getElementById('profile-setup').style.display = 'block';
                document.getElementById('profile-view').style.display = 'none';
                return false;
            }
        }

        function lockInterface() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                if (item.id !== 'nav-profile') {
                    item.classList.add('locked');
                    item.classList.remove('active');
                } else {
                    item.classList.add('active');
                }
            });
            document.querySelectorAll('.modal-overlay').forEach(el => el.classList.remove('active'));
            document.getElementById('modal-profile').classList.add('active');
        }

        function unlockInterface() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('locked'));
        }

        function saveProfile(e) {
            e.preventDefault();
            const btn = document.getElementById('submit-btn');
            const spinner = document.getElementById('loading-spinner');
            const btnText = btn.querySelector('span');
            const form = document.getElementById('registration-form');
            const formData = new FormData(form);
            const dataObj = Object.fromEntries(formData.entries());

            btn.disabled = true;
            btnText.textContent = "Registering...";
            spinner.style.display = 'inline-block';

            fetch(SCRIPT_URL, {
                method: 'POST',
                body: formData,
                mode: 'no-cors'
            })
            .then(() => {
                console.log('Request sent successfully (no-cors mode)');
                finalizeProfile(dataObj);
            })
            .catch(error => {
                console.error('Error!', error.message);
                alert("Network issue. Saving locally so you can continue.");
                finalizeProfile(dataObj);
            });
        }

        function finalizeProfile(data) {
            localStorage.setItem('userProfile', JSON.stringify(data));
            document.getElementById('submit-btn').disabled = false;
            document.getElementById('submit-btn').querySelector('span').textContent = "Complete Registration";
            document.getElementById('loading-spinner').style.display = 'none';
            unlockInterface();
            loadProfile(data);
            setTimeout(() => {
                activateTab(document.getElementById('nav-guide'), 'guide');
            }, 500);
        }

        function loadProfile(data) {
            document.getElementById('profile-setup').style.display = 'none';
            document.getElementById('profile-view').style.display = 'block';
            document.getElementById('display-name').textContent = data.name;
            document.getElementById('display-phone').textContent = data.phone;
            document.getElementById('display-email').textContent = data.email;
            document.getElementById('display-gender').textContent = data.gender;
            document.getElementById('display-place').textContent = data.place;
            document.getElementById('display-date').textContent = data.startDate;
            
            const start = new Date(data.startDate);
            const now = new Date();
            const diffTime = Math.abs(now - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
            document.getElementById('display-days').textContent = isNaN(diffDays) ? 0 : diffDays;
        }

        function resetProfile() {
            if(confirm("Are you sure? All data will be cleared and you will be locked out until you register again.")) {
                localStorage.removeItem('userProfile');
                location.reload();
            }
        }

        // --- TAB NAVIGATION LOGIC ---
        function activateTab(element, tabId) {
            const hasProfile = localStorage.getItem('userProfile');
            if (!hasProfile && tabId !== 'profile') {
                alert("üîí Please complete your profile registration to access this section.");
                activateTab(document.getElementById('nav-profile'), 'profile');
                return;
            }
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            if(element) element.classList.add('active');
            document.querySelectorAll('.modal-overlay').forEach(el => el.classList.remove('active'));
            const target = document.getElementById(`modal-${tabId}`);
            if(target) target.classList.add('active');
        }

        // --- SUB-MODAL LOGIC ---
        function openSubModal(id) {
            document.getElementById(id).classList.add('active');
        }
        function closeSubModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        // --- POPULATE POSTS ---
        function renderPosts() {
            const container = document.getElementById('full-post-list');
            container.innerHTML = '';
            allPosts.forEach(post => {
                const item = document.createElement('div');
                item.className = 'bg-gray-800 p-3 rounded border border-gray-700';
                item.innerHTML = `<h4 class="font-bold text-[var(--gold)] mb-1">${post.title}</h4><p class="text-xs text-gray-300">${post.desc}</p>`;
                container.appendChild(item);
            });
        }

        // --- CHARTS INITIALIZATION ---
        document.addEventListener("DOMContentLoaded", function() {
            const hasProfile = checkProfile();
            if(hasProfile) {
                activateTab(document.getElementById('nav-guide'), 'guide');
            }

            renderPosts();

            Chart.defaults.color = '#fff';
            Chart.defaults.font.family = "'Plus Jakarta Sans', sans-serif";

            // RRB NTPC Exam Pattern Chart
            const ctx1 = document.getElementById('examPatternChart').getContext('2d');
            new Chart(ctx1, {
                type: 'pie',
                data: {
                    labels: ['Maths (30)', 'Reasoning (30)', 'GA (40)'],
                    datasets: [{
                        data: [30, 30, 40],
                        backgroundColor: [
                            'rgba(37, 99, 235, 0.8)',   // Blue
                            'rgba(255, 215, 0, 0.8)',   // Gold
                            'rgba(16, 185, 129, 0.8)'   // Green
                        ],
                        borderColor: '#000',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { position: 'right', labels: { color: '#ccc', font: {size: 10} } } 
                    }
                }
            });
        });

        window.onclick = function(event) {
            if (event.target.classList.contains('sub-modal')) {
                event.target.classList.remove('active');
            }
        }
    </script>
</body>
</html>
