<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crapd.in-All-Goverment-Job-Full-Flash-Guidence</title>
    <!-- Tailwind CSS CDN for 'ultrapromax' responsive design and golden theme -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for golden theme with promax effects */
        .golden-text-gradient {
            background-image: linear-gradient(180deg, #FFD700, #FFC107, #B8860B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .golden-border {
            border: 2px solid;
            border-image: linear-gradient(135deg, #FFD700, #B8860B, #FFD700) 1;
        }
        .golden-shadow {
            box-shadow: 0 4px 6px -1px rgba(255, 215, 0, 0.1), 0 2px 4px -1px rgba(255, 215, 0, 0.06);
        }
        .popup-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none; /* Hide by default */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .popup-content {
            background-color: #1a1a1a;
            color: #FFD700;
            padding: 2.5rem;
            border-radius: 1.5rem;
            max-width: 90%;
            /* Removed fixed width for better responsiveness on small screens */
            width: auto; 
            min-width: 300px;
            margin: 0 1rem;
            text-align: center;
            border: 3px solid #FFD700;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.5);
            animation: fadeInScale 0.5s ease-out forwards;
        }
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        .input-field {
            background-color: #2a2a2a;
            border: 2px solid #FFC107;
            color: white;
        }
        .input-field:focus {
            outline: none;
            border-color: #FFD700;
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.5);
        }
        .button {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(255, 215, 0, 0.3);
        }
        .button:active {
            transform: translateY(0);
            box-shadow: none;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #FFD700;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen">

    <div class="text-center p-8">
        <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold golden-text-gradient mb-4 drop-shadow-xl">
            Welcome to Crapd.in 
        </h1>
        <p class="text-lg sm:text-xl text-gray-400">
            Aapka safar shuru hone wala hai.
        </p>
    </div>

    <!-- Popup Step 1: Form -->
    <div id="popup-step-1" class="popup-container">
        <div class="popup-content golden-border">
            <h2 id="step-1-heading" class="text-2xl sm:text-3xl font-bold mb-4 golden-text-gradient drop-shadow-lg">
                <span class="golden-text-gradient">Abhi Shuru Karen!</span>
            </h2>
            <form id="form-step-1" class="space-y-4">
                <div>
                    <input type="text" id="name" name="name" placeholder="Aapka Pyaara Naam" required class="w-full p-3 rounded-lg input-field">
                </div>
                <div>
                    <input type="tel" id="number" name="number" placeholder="Aapka Number" required class="w-full p-3 rounded-lg input-field">
                </div>
                <div>
                    <input type="email" id="email" name="email" placeholder="Aapka Email" required class="w-full p-3 rounded-lg input-field">
                </div>
                <button type="submit" id="next-button" class="w-full px-6 py-3 mt-6 text-xl font-bold text-gray-900 bg-amber-500 rounded-lg shadow-xl button hover:bg-amber-400">
                    Next
                </button>
            </form>
        </div>
    </div>

    <!-- Popup Step 2: Payment -->
    <div id="popup-step-2" class="popup-container">
        <div class="popup-content golden-border text-left">
            <h2 class="text-2xl sm:text-3xl font-bold mb-4 golden-text-gradient drop-shadow-lg text-center">
                Abhi Khareedein Aur Safalta Ki Raah Par Chalein
            </h2>
            <ul class="text-gray-300 text-sm md:text-base leading-relaxed mb-6 space-y-3">
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>All Government Job ki Poori Guide.</span>
                </li>
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>Video Lectures ki Exclusive Playlist.</span>
                </li>
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>Notes teen bhaashao mein: Hindi, English, aur Punjabi.</span>
                </li>
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>WhatsApp support.</span>
                </li>
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>Call support.</span>
                </li>
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>UPSC jaisi sabhi services ki poori jaankari.</span>
                </li>
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>Apne sapne ko sach karen.</span>
                </li>
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>Samay bachayen aur tezi se taiyari karen.</span>
                </li>
                <li class="flex items-start">
                    <svg class="h-6 w-6 text-amber-500 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                    <span>Bharat ki har sarkari naukri ka ek solution.</span>
                </li>
            </ul>
            <!-- Secret Code Section, hidden by default -->
            <div id="secret-code-section" class="mt-8 hidden">
                <input type="text" id="secret-code" placeholder="Secret Code Daalein" class="w-full p-3 rounded-lg input-field text-center">
            </div>
            
            <p id="payment-text" class="text-xl sm:text-2xl font-bold golden-text-gradient mb-4 text-center">Sirf ₹51 mein, ye sab paayen!</p>
            <button id="pay-button" class="w-full px-6 py-3 mt-4 text-xl font-bold text-gray-900 bg-amber-500 rounded-lg shadow-xl button hover:bg-amber-400">
                Pay ₹51
            </button>
            <button id="secret-okay-button" class="w-full px-6 py-3 mt-4 text-xl font-bold text-gray-900 bg-amber-500 rounded-lg shadow-xl button hover:bg-amber-400 hidden">
                Okay
            </button>
        </div>
    </div>

    <!-- Popup Step 3: Confirmation -->
    <div id="popup-step-3" class="popup-container">
        <div class="popup-content golden-border">
            <h2 id="welcome-heading" class="text-2xl sm:text-3xl font-bold mb-4 golden-text-gradient drop-shadow-lg">
                <!-- User's name will be inserted here -->
            </h2>
            <p class="text-gray-300 text-sm md:text-base leading-relaxed mb-8">
                Aapka dhanyawad! Aapka bhugtaan safal raha. Ab aap ek naye safar ki shuruaat karne ke liye taiyaar hain. Is chote se kadam se, aapne bade maukon ke liye darwaza khol diya hai.
            </p>
            <p class="text-gray-400 text-xs mb-4">
                (Hum aapke liye sabkuch set kar rahe hain...)
            </p>
            <div id="loader" class="mx-auto my-4 loader"></div>
            <button id="okay-button" class="w-full px-6 py-3 mt-4 text-xl font-bold text-gray-900 bg-amber-500 rounded-lg shadow-xl button hover:bg-amber-400 hidden">
                Okay
            </button>
        </div>
    </div>

    <!-- Razorpay CDN -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script>
        // DOM elements ko select karna
        const popupStep1 = document.getElementById('popup-step-1');
        const popupStep2 = document.getElementById('popup-step-2');
        const popupStep3 = document.getElementById('popup-step-3');
        const formStep1 = document.getElementById('form-step-1');
        const nameInput = document.getElementById('name');
        const step1Heading = document.getElementById('step-1-heading');
        const payButton = document.getElementById('pay-button');
        const okayButton = document.getElementById('okay-button');
        const welcomeHeading = document.getElementById('welcome-heading');
        const loader = document.getElementById('loader');
        const secretCodeSection = document.getElementById('secret-code-section');
        const secretCodeInput = document.getElementById('secret-code');
        const secretOkayButton = document.getElementById('secret-okay-button');
        const paymentText = document.getElementById('payment-text');

        let userData = {};
        let transectionId = '';
        const amount = 51; // Amount in rupees

        // Check for payment status in local storage on page load
        const hasPaid = localStorage.getItem('hasPaid');
        if (hasPaid === 'true') {
            window.location.href = 'govt-all-services.html';
        } else {
            // Page load hote hi pehla popup dikhana
            document.addEventListener('DOMContentLoaded', () => {
                popupStep1.style.display = 'flex';
            });
        }

        // Step 1: Name input par event listener lagana
        nameInput.addEventListener('input', (e) => {
            const name = e.target.value.trim();
            if (name) {
                step1Heading.innerHTML = `<span class="golden-text-gradient">${name}, Aapka Swagat Hai!</span>`;
            } else {
                step1Heading.innerHTML = `<span class="golden-text-gradient">Abhi Shuru Karen!</span>`;
            }
        });

        // Step 1: Form submit par event listener
        formStep1.addEventListener('submit', (e) => {
            e.preventDefault();
            const fullName = nameInput.value.trim();
            userData.name = fullName;
            userData.number = document.getElementById('number').value.trim();
            userData.email = document.getElementById('email').value.trim();

            if (userData.name && userData.number && userData.email) {
                popupStep1.style.display = 'none';
                popupStep2.style.display = 'flex';
                
                // Check for last name and show secret code input
                const nameParts = fullName.toLowerCase().split(' ');
                const lastName = nameParts[nameParts.length - 1];
                if (lastName === 'insa' || lastName === 'insha' || lastName === 'insan') {
                    secretCodeSection.classList.remove('hidden');
                    payButton.classList.add('hidden');
                    paymentText.classList.add('hidden');
                } else {
                    secretCodeSection.classList.add('hidden');
                    payButton.classList.remove('hidden');
                    paymentText.classList.remove('hidden');
                }
            } else {
                // Agar koi field khali hai toh custom message box dikhana
                alert("Kripya sabhi jaankari bharen.");
            }
        });

        // Secret code input par event listener
        secretCodeInput.addEventListener('input', (e) => {
            if (e.target.value === 'MSGMSGMSG') {
                secretOkayButton.classList.remove('hidden');
            } else {
                secretOkayButton.classList.add('hidden');
            }
        });

        // Secret code 'Okay' button ka listener
        secretOkayButton.addEventListener('click', () => {
             // show welcome popup
            showWelcomePopup();
            // send data
            const data = {
                name: userData.name,
                number: userData.number,
                email: userData.email,
                amount: 'Dera-Premi',
                transaction_id: 'Dhan Dhan Satguru Tera Hi Ashsra ji'
            };
            sendDataToGoogleSheets(data, true);
        });

        // Step 2: Pay button click par Razorpay open karna
        payButton.addEventListener('click', () => {
            // Razorpay test key. Live hone par ise apne live key se replace karen.
            const razorpayKey = 'rzp_test_R8jhec7OX4EwPc'; // Updated Razorpay Key

            const options = {
                key: razorpayKey,
                amount: amount * 100, // Amount in paise
                currency: "INR",
                name: "All Government Job Services", // Updated name
                description: "Complete Guide, Video Lectures, and Notes", // Updated description
                handler: function (response) {
                    // Payment successful hone par
                    transectionId = response.razorpay_payment_id;
                    const data = {
                        name: userData.name,
                        number: userData.number,
                        email: userData.email,
                        amount: amount,
                        transaction_id: transectionId
                    };
                    showWelcomePopup();
                    sendDataToGoogleSheets(data, false); // false indicates payment done
                },
                prefill: {
                    name: userData.name,
                    email: userData.email,
                    contact: userData.number,
                },
                notes: {
                    address: "Razorpay Corporate Office"
                },
                theme: {
                    color: "#FFD700" // Golden theme
                }
            };
            const rzp1 = new Razorpay(options);
            rzp1.open();

            // Payment modal close hone par
            rzp1.on('payment.failed', function (response){
                // Payment failed hone par action
                alert("Payment failed: " + response.error.description);
            });
        });

        // Payment successful hone par welcome popup dikhana
        function showWelcomePopup() {
            popupStep2.style.display = 'none';
            popupStep3.style.display = 'flex';
            welcomeHeading.innerHTML = `<span class="golden-text-gradient">${userData.name}, Aapka Dhanyawad!</span>`;
        }

        // Step 3: Data ko Google Sheets mein bhejna
        async function sendDataToGoogleSheets(data, isSecretCode) {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxOET0tOiJTHgYVDlBWyz6-rAHMQqd32_ezqmQa13HSQv-DVo3ZvQtNppPZgHcISApXhw/exec';
            
            const formData = new FormData();
            formData.append('name', data.name);
            formData.append('number', data.number);
            formData.append('email', data.email);
            formData.append('amount', data.amount);
            formData.append('transaction_id', data.transaction_id);

            try {
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    // Data successfully sent
                    loader.style.display = 'none';
                    localStorage.setItem('hasPaid', 'true');
                    okayButton.style.display = 'block';
                } else {
                    console.error('Error sending data:', response.statusText);
                    loader.style.display = 'none';
                    okayButton.style.display = 'block';
                    alert("Data Google Sheet mein bhejne mein koi samasya hui. Kripya baad mein prayas karen.");
                }
            } catch (error) {
                console.error('Error:', error);
                loader.style.display = 'none';
                okayButton.style.display = 'block';
                alert("Network error: Data Google Sheet mein nahi bheja ja saka.");
            }
        }

        // Okay button par click hone par redirect karna
        okayButton.addEventListener('click', () => {
            window.location.href = 'govt-all-services.html';
        });

    </script>
</body>
</html>
